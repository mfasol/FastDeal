create TABLE INVENTORY_ITEMS_GB_AMAZON (
    INTERNAL_INVOICE_REFERENCE_KEY INTEGER not null,
    INTERNAL_INVOICE_REFERENCE_LINE INTEGER not null,
    ITEM_NUMBER INTEGER not null,
    CONCATENATED_PRIMARY_KEY VARCHAR(255) not null,
    INVOICE_UUID UUID not null,
    INVOICE_LINE_UUID UUID not null,
    PRODUCT_KEY VARCHAR(255) not null,
    ITEM_COS DOUBLE(17, 0) not null,
    SINGLE_ITEM_UUID UUID not null,
    ITEM_DATE DATE not null,
    INVENTORY_ITEM_STATUS VARCHAR(255) not null,
    INVENTORY_ITEM_CURRENCY VARCHAR(255) not null,
    INVENTORY_ITEM_STORE_TIMESTAMP TIMESTAMP not null,
    INVENTORY_TRANSACTION_LOCKED BOOLEAN not null default FALSE,
    PRIMARY KEY (INTERNAL_INVOICE_REFERENCE_KEY, INTERNAL_INVOICE_REFERENCE_LINE, ITEM_NUMBER),
    FOREIGN KEY (PRODUCT_KEY) REFERENCES PRODUCT (SELLER_SKU)
);
CREATE UNIQUE INDEX INVENTORY_ITEMS_CONCATENATED_PRIMARY_KEY_UINDEX ON INVENTORY_ITEMS_GB_AMAZON (CONCATENATED_PRIMARY_KEY);
CREATE UNIQUE INDEX INVENTORY_ITEMS_SINGLE_ITEM_UUID_UINDEX ON INVENTORY_ITEMS_GB_AMAZON (SINGLE_ITEM_UUID);
CREATE INDEX INVENTORY_ITEMS_UK_AMAZON___FK_INDEX_D ON INVENTORY_ITEMS_GB_AMAZON (PRODUCT_KEY);
create TABLE PRODUCT (
    ASIN VARCHAR(255) not null,
    EAN VARCHAR(255) not null,
    SELLER_SKU VARCHAR(255) not null,
    ITEM_NAME VARCHAR(255) not null,
    OPEN_DATE DATE not null,
    MANUFACTURER VARCHAR(255) not null,
    STATUS VARCHAR(25) not null,
    PRODUCT_KEY VARCHAR(255) not null,
    STORE_TIMESTAMP TIMESTAMP,
    STORE_UUID UUID,
    PRIMARY KEY (PRODUCT_KEY)
);
CREATE UNIQUE INDEX PRODUCT_ASIN_UINDEX ON PRODUCT (ASIN);
CREATE UNIQUE INDEX PRODUCT_SELLER_SKU_UINDEX ON PRODUCT (SELLER_SKU);
create TABLE PURCHASE_LEDGER (
    TRANSACTION_DATE DATE not null,
    EXTERNAL_TRANSACTION_REFERENCE VARCHAR(255) not null,
    SUPPLIER_KEY VARCHAR(255) not null,
    DESCRIPTION VARCHAR(255) not null,
    PRODUCT_KEY VARCHAR(255),
    QUANTITY INTEGER,
    PRICE DOUBLE(17, 0) not null,
    VAT_CODE VARCHAR(255) not null,
    VAT_AMOUNT DOUBLE(17, 0) not null default 0,
    SHIPPED_FROM_COUNTRY VARCHAR(255),
    SHIPPED_TO_COUNTRY VARCHAR(255),
    SHIPPED_TO_CHANNEL VARCHAR(255),
    TRANSACTION_LINE_UUID UUID not null,
    INVENTORY_RELEVANT BOOLEAN not null,
    INTERNAL_TRANSACTION_REFERENCE_KEY INTEGER not null,
    INTERNAL_TRANSACTION_REFERENCE_LINE INTEGER not null,
    INVOICE_UUID UUID not null,
    CURRENCY VARCHAR(25) not null,
    PURCHASE_LEDGER_TRANSACTION_STORE_TIMESTAMP TIMESTAMP not null,
    TRANSACTION_TYPE VARCHAR(255) not null,
    UPDATE_LOCK BOOLEAN not null default FALSE,
    INVENTORY_COS_RELEVANT BOOLEAN not null,
    TRANSACTION_GROUP_ALLOCATION INTEGER,
    TRANSACTION_LINE_ALLOCATION INTEGER,
    PRIMARY KEY (TRANSACTION_LINE_UUID)
);
create TABLE SALES_LEDGER (
    TRANSACTION_DATE DATE not null,
    EXTERNAL_TRANSACTION_ID VARCHAR(255) not null,
    PRODUCT_KEY VARCHAR(255) not null,
    SHIP_CITY VARCHAR(255),
    SHIP_POSTCODE VARCHAR(255),
    SHIP_COUNTRY VARCHAR(255) not null,
    QUANTITY INTEGER not null,
    TRANSACTION_PRICE DOUBLE(17, 0) not null,
    TRANSACTION_ADDITIONAL_COS DOUBLE(17, 0),
    TRANSACTION_CHANNEL VARCHAR(255) not null,
    CURRENCY VARCHAR(255) not null,
    TRANSACTION_ID INTEGER not null,
    TRANSACTION_LINE_ID INTEGER not null,
    TRANSACTION_LINE_UUID UUID not null,
    TRANSACTION_STATUS VARCHAR(255),
    ITEM_ID VARCHAR(255),
    TRANSACTION_TIMESTAMP TIMESTAMP not null,
    TRANSACTION_LOCK BOOLEAN not null,
    PRIMARY KEY (TRANSACTION_LINE_UUID)
);
CREATE INDEX SALES_LEDGER_PRODUCT__FK_INDEX_4 ON SALES_LEDGER (PRODUCT_KEY);
    EXTERNAL_TRANSACTION_REFERENCE VARCHAR(255) not null,
    SUPPLIER_KEY VARCHAR(255) not null,
    DESCRIPTION VARCHAR(255) not null,
    PRODUCT_KEY VARCHAR(255),
    QUANTITY INTEGER,
    PRICE DOUBLE(17, 0) not null,
    VAT_CODE VARCHAR(255) not null,
    VAT_AMOUNT DOUBLE(17, 0) not null default 0,
    SHIPPED_FROM_COUNTRY VARCHAR(255),
    SHIPPED_TO_COUNTRY VARCHAR(255),
    SHIPPED_TO_CHANNEL VARCHAR(255),
    TRANSACTION_LINE_UUID UUID not null,
    INVENTORY_RELEVANT BOOLEAN not null,
    INTERNAL_TRANSACTION_REFERENCE_KEY INTEGER not null,
    INTERNAL_TRANSACTION_REFERENCE_LINE INTEGER not null,
    INVOICE_UUID UUID not null,
    CURRENCY VARCHAR(25) not null,
    PURCHASE_LEDGER_TRANSACTION_STORE_TIMESTAMP TIMESTAMP not null,
    TRANSACTION_TYPE VARCHAR(255) not null,
    UPDATE_LOCK BOOLEAN not null default FALSE,
    INVENTORY_COS_RELEVANT BOOLEAN not null,
    TRANSACTION_GROUP_ALLOCATION INTEGER,
    TRANSACTION_LINE_ALLOCATION INTEGER,
    PRIMARY KEY (TRANSACTION_LINE_UUID)
);